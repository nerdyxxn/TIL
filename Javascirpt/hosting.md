# 호이스팅

<br>

호이스팅은 선언문이 코드 선두로 끌어 올려진 것처럼 동작하는 자바스크립트의 고유의 특징을 호이스팅이라고 한다.

<br>

예를들어 변수의 호출이 선언보다 위의 코드에 존재하였을때 이 변수의 참조가 가능하다.

<br>

## 😀 소스코드 평가과정, 실행과정

<br>

자바스크립트 엔진에서는 코드를 평가하는 과정과 실행하는 과정 2단계가 있다.

<br>

소스코드 평가과정에서는 실행 컨텍스트를 생성하고 변수, 함수와 같은 식별자의 선언문들 만을 먼저 실행하여 실행 컨텍스트의 스코프에 저장한다.

<br>

이러한 소스코드 평과가정이 끝난후,

소스코드 실행과정에서 소스코드가 실행되기 시작한다.

<br>

소스코드의 평가과정때 저장한 식별자들의 스코프에서 값들을 참조하는 필요한 정보를 가져와 사용한다.

<br>

## 🧐 변수의 호이스팅

<br>

자바스크립트 엔진은 변수 선언을 2단계를 거친다.

<br>

첫번째로 선언단계 변수의 이름을 등록해서 자바스크립트 엔진에 변수의 존재를 알린다.

<br>

두번째로 초기화단계 값을 저장하기 위한 단계

<br>

자바스크립트에서는 변수를 선언하는 방법이 3가지가 있다.

<br>

### 1. var

<br>

var는 변수가 선언하게되고 소스코드 평가과정에서 undefined가 암묵적으로 할당되어 초기화 되어진다.

<br>

런타임이전에 소스코드 평과 과정때 실행됬기 때문에 호이스팅이 발생하게 된다.

<br>

### 2. let, const

<br>

var 키워드와 다르게 let, const 키워드는 변수 호이스팅이 발생하지 않는것처럼 동작한다.

<br>

var 키워드는 선언단계와 초기화단계가 한번에 진행되지만

<br>

let과 const는 선언단계와 초기화 단계가 분리되어 진행된다.

<br>

소스코드 평과과정때 자바스크립트 엔진에 의해 선언단계가 실행되지만 초기화 단계는 변수의 선언문에 도달했을 때 실행된다.

<br>

스코프의 시작지 점부터 변수의 선언문사이에 참조하면 ReferenceError가 발생한다.

<br>

이 구간을 Temporal Dead Zone; TDZ 라고 부른다.

<br>

### 😟 호이스팅이 발생하지 않는것 처럼 동작

<br>

let, const는 호이스팅이 발생하지 않는 것처럼 동작한다.

하지만 그렇지 않다.

```jsx
let foo = 1; // 전역 변수

{
  console.log(foo); // ReferenceError: Cannot access 'foo' before initialization
  let foo = 2; // 지역 변수
}
```

<br>

foo가 전역변수에서 1로 선언이 되었고 그렇다면 블록문안에 전역변수의 foo가 참조 되어야하지만 ReferenceError가 발생한다.

<br>

호이스팅이 발생하기 때문이다.

<br>

## 정리

<br>

- 호이스팅이란?
- 소스코드 평과 과정, 실행 과정
- 변수 호이스팅

  → var Vs let, const

- let, const 호이스팅이 발생하지 않은것처럼 동작

<br>

참고

- [모던 자바스크립트 deep dive](http://www.yes24.com/Product/Goods/92742567)
